{"is_source_file": true, "format": "Kotlin", "description": "This file contains the core Tetris game engine implementation in Kotlin. It defines data classes for game state management, such as ScoreState and GameSnapshot, and the main game logic encapsulated within the TetrisEngine class. The class manages piece spawning, movement, rotation with SRS-like kicks, collision detection, line clearing, scoring, levels, next queue, hold functionality, and game over conditions. It operates independently of Android UI components, focusing solely on game mechanics.", "external_files": ["com/example/tetris_android_tv_frontend/game/BoardState.kt", "com/example/tetris_android_tv_frontend/game/BoardCell.kt", "com/example/tetris_android_tv_frontend/game/PieceState.kt", "com/example/tetris_android_tv_frontend/game/TetrominoType.kt", "com/example/tetris_android_tv_frontend/game/Coord.kt", "com/example/tetris_android_tv_frontend/game/Rotation.kt", "com/example/tetris_android_tv_frontend/game/SevenBagRNG.kt", "com/example/tetris_android_tv_frontend/game/SRS.kt"], "external_methods": ["SRS.kicks", "SevenBagRNG.next", "SevenBagRNG.reseed"], "published": ["com.example.tetris_android_tv_frontend.game.ScoreState", "com.example.tetris_android_tv_frontend.game.GameSnapshot", "com.example.tetris_android_tv_frontend.game.TetrisEngine"], "classes": [{"name": "ScoreState", "description": "Represents the current score, level, and total lines cleared."}, {"name": "GameSnapshot", "description": "Immutable snapshot of the game's current state, including board, active piece, queue, hold, and score."}, {"name": "TetrisEngine", "description": "Main class encapsulating Tetris game logic, handling piece management, movement, rotation, line clearing, scoring, and game over conditions."}], "methods": [{"name": "snapshot", "description": "Returns an immutable snapshot of the current game state."}, {"name": "reset", "description": "Resets the game to initial state with optional seed for RNG."}, {"name": "tickGravity", "description": "Advances the active piece downward by gravity; locks piece if it cannot move down."}, {"name": "softDrop", "description": "Drops the active piece down as far as possible, awarding points per cell."}, {"name": "hardDrop", "description": "Instantly drops the active piece to the lowest possible position, awarding points per cell."}, {"name": "moveLeft", "description": "Moves the active piece left if possible."}, {"name": "moveRight", "description": "Moves the active piece right if possible."}, {"name": "rotateCW", "description": "Rotates the active piece clockwise if possible."}, {"name": "rotateCCW", "description": "Rotates the active piece counter-clockwise if possible."}, {"name": "hold", "description": "Swaps the current active piece with the held piece, if hold is enabled and allowed."}, {"name": "isGameOver", "description": "Returns true if the game is over."}], "calls": ["tryMove", "lockActiveAndProceed", "spawnNext", "ensureQueue", "nextFromQueue", "scoreStateAfterClear"], "search-terms": ["TetrisEngine", "piece spawning", "rotation kicks", "line clearing", "hold function", "game over detection", "7-bag queue", "score and level management"], "state": 2, "file_id": 18, "knowledge_revision": 40, "git_revision": "1993040eb212919dd2acb3a4ca0a62a027d79fd6", "revision_history": [{"38": ""}, {"40": "1993040eb212919dd2acb3a4ca0a62a027d79fd6"}], "hash": "f748e4bc0795c2ee926eb74e6fd643e5", "format-version": 4, "code-base-name": "tetris_android_tv_frontend", "filename": "tetris_android_tv_frontend/app/src/main/java/com/example/tetris_android_tv_frontend/game/TetrisEngine.kt"}