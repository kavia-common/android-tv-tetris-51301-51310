{"is_source_file": true, "format": "Kotlin", "description": "This is the core implementation of a Tetris game engine, handling game logic such as piece spawning, movement, rotation, collision detection, line clearing, scoring, and the game state transitions. It is independent of the Android UI, focusing solely on game mechanics.", "external_files": ["com/example/tetris_android_tv_frontend/game/BoardState.kt", "com/example/tetris_android_tv_frontend/game/BoardCell.kt", "com/example/tetris_android_tv_frontend/game/Coord.kt", "com/example/tetris_android_tv_frontend/game/PieceState.kt", "com/example/tetris_android_tv_frontend/game/TetrominoType.kt", "com/example/tetris_android_tv_frontend/game/SevenBagRNG.kt", "com/example/tetris_android_tv_frontend/game/Rotation.kt", "com/example/tetris_android_tv_frontend/game/SRS.kt"], "external_methods": ["SRS.kicks()", "Rotation.cw()", "Rotation.ccw()", "BoardState.collides()", "BoardState.get()", "BoardState.set()", "BoardState.inBounds()", "PieceState.blocks()", "Coord.\u0002b()"], "published": ["com.example.tetris_android_tv_frontend.game.ScoreState", "com.example.tetris_android_tv_frontend.game.GameSnapshot", "com.example.tetris_android_tv_frontend.game.TetrisEngine"], "classes": [{"name": "ScoreState", "description": "Represents the current score, level, and total lines cleared in the game."}, {"name": "GameSnapshot", "description": "A snapshot of the current game state, including board, active piece, queue, hold, score, and game over status."}, {"name": "TetrisEngine", "description": "Main class handling the core Tetris game logic, including piece spawning, movement, rotation, line clearing, scoring, and game progression."}], "methods": [{"name": "snapshot", "description": "Returns a current snapshot of the game state."}, {"name": "reset", "description": "Resets the game to initial state with optional seed for RNG."}, {"name": "tickGravity", "description": "Advances the game by applying gravity to the active piece."}, {"name": "softDrop", "description": "Accelerates the descent of the active piece, awarding points per cell."}, {"name": "hardDrop", "description": "Instantly drops the active piece to the lowest valid position, awarding points."}, {"name": "moveLeft", "description": "Moves the active piece left if possible."}, {"name": "moveRight", "description": "Moves the active piece right if possible."}, {"name": "rotateCW", "description": "Rotates the active piece clockwise if possible."}, {"name": "rotateCCW", "description": "Rotates the active piece counter-clockwise if possible."}, {"name": "hold", "description": "Holds or swaps the current piece with the hold piece."}, {"name": "isGameOver", "description": "Checks if the game has ended."}], "calls": ["tryMove()", "lockActiveAndProceed()", "spawnNext()", "clearFullLines()", "scoreStateAfterClear()", "ensureQueue()", "nextFromQueue()", "spawnPosition()"], "search-terms": ["TetrisEngine", "core game logic", "piece rotation", "queue management", "collision detection", "line clearing", "hold functionality", "7-bag RNG", "game over detection"], "state": 2, "file_id": 18, "knowledge_revision": 38, "git_revision": "", "hash": "4c3c75ee2fd640990415ba452f53466b", "format-version": 4, "code-base-name": "tetris_android_tv_frontend", "filename": "tetris_android_tv_frontend/app/src/main/java/com/example/tetris_android_tv_frontend/game/TetrisEngine.kt", "revision_history": [{"38": ""}]}